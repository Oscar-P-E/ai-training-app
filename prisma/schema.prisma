generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Mesocycle {
  id      String @id @default(cuid())
  name    String
  ownerId String
  weeks   Week[]
}

model Week {
  id   String @id @default(cuid())
  name String
  days Day[]

  mesocycle   Mesocycle @relation(fields: [mesocycleId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  mesocycleId String

  @@index([mesocycleId])
}

model Day {
  id        String     @id @default(cuid())
  name      String
  exercises Exercise[]
  dayLabel  DayLabel?

  week   Week   @relation(fields: [weekId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  weekId String
  Set    Set[]

  @@index([weekId])
}

model Exercise {
  id          String       @id @default(cuid())
  name        String       @unique
  muscleGroup MuscleGroup?
  sets        Set[]

  days Day[]

  @@index([id])
  @@index([muscleGroup])
}

model Set {
  id     String @id @default(cuid())
  reps   Int?
  weight Int?
  rir    Int?
  order  Int

  exercise   Exercise @relation(fields: [exerciseId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  exerciseId String
  day        Day      @relation(fields: [dayId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  dayId      String

  @@index([exerciseId])
  @@index([dayId])
}

enum MuscleGroup {
  CHEST
  BACK_HORIZONTAL
  BACK_VERTICAL
  SHOULDERS_TRAPS
  BICEPS
  TRICEPS
  QUADS
  HAMS
  GLUTES
  FOREARMS
  CALVES
  ABS
  REAR_DELTS_RHOMB
}

enum DayLabel {
  Monday
  Tuesday
  Wednesday
  Thursday
  Friday
  Saturday
  Sunday
}
